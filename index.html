<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Daily-Tune Song Suggester</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: 'Poppins', 'Segoe UI', Arial, sans-serif;
      background: radial-gradient(ellipse at 80% 20%, #ffe0ec 0%, #fbeff5 60%, #fff 100%);
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: background 0.5s;
    }
    .container {
      width: 100%;
      max-width: 430px;
      background: rgba(255,255,255,0.94);
      border-radius: 18px 18px 32px 32px;
      box-shadow: 0 0 28px 0 #ffb8d2b2, 0 6px 64px 0 #f3b7cf33;
      padding: 2.5em 1.3em 2em 1.3em;
      box-sizing: border-box;
      margin: 2.5em auto 1em auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: floatIn 1.1s cubic-bezier(.55,1.35,.55,1.15);
      backdrop-filter: blur(2px);
    }
    @keyframes floatIn {
      from { transform: translateY(60px) scale(0.95) rotateX(8deg); opacity: 0;}
      to { transform: translateY(0) scale(1) rotateX(0); opacity: 1;}
    }
    h1 {
      color: #e91e63;
      font-size: 2.25em;
      margin-bottom: 0.7em;
      letter-spacing: 0.05em;
      text-shadow: 1px 2px 0 #fbeff5, 0 0 10px #ffc1e3aa;
      font-weight: 900;
      line-height: 1.15;
    }
    .wonder {
      font-size: 2.2em;
      color: #f06292;
      animation: noteSpin 2.5s linear infinite;
      display: inline-block;
      margin-right: .11em;
      vertical-align: bottom;
    }
    @keyframes noteSpin {
      0% { transform: rotate(-20deg);}
      70% { transform: rotate(16deg);}
      100% { transform: rotate(-20deg);}
    }
    label {
      font-size: 1.09em;
      margin-bottom: 0.6em;
      color: #ca207a;
      display: block;
      font-weight: 600;
      text-shadow: 0 1px 0 #fff;
      letter-spacing: .03em;
    }
    select {
      width: 100%;
      padding: 0.8em 1em;
      margin-bottom: 1.25em;
      border: 1.5px solid #e91e63;
      border-radius: 12px;
      background: linear-gradient(90deg,#fff 90%,#fbeff5 100%);
      font-size: 1.07em;
      color: #e91e63;
      font-weight: 500;
      outline: none;
      box-shadow: 0 1px 3px #fbeff5, 0 0 0 rgba(0,0,0,0);
      transition: border 0.2s, box-shadow 0.3s;
      appearance: none;
      cursor: pointer;
    }
    select:focus {
      border: 2px solid #ca207a;
      box-shadow: 0 0 0 3px #ffc1e333;
    }
    button {
      padding: 0.9em 2.3em;
      font-size: 1.13em;
      border-radius: 18px;
      border: none;
      background: linear-gradient(90deg, #f06292 10%, #e040fb 90%);
      color: white;
      font-weight: 700;
      cursor: pointer;
      letter-spacing: 0.05em;
      box-shadow: 0 2px 18px 0 #e040fb44, 0 1px 3px #fbeff5;
      margin-bottom: 1.2em;
      margin-top: 0.5em;
      transition: background 0.22s, transform 0.18s, box-shadow .22s;
      outline: none;
    }
    button:active {
      background: linear-gradient(90deg, #e91e63, #7c4dff);
      transform: scale(0.98);
      box-shadow: 0 0px 4px #e040fb55;
    }
    #result {
      background: linear-gradient(90deg, #ffe1f6 60%, #fbeff5 100%);
      border-radius: 18px;
      padding: 1.3em 0.6em;
      margin: 0.7em 0 1em 0;
      font-size: 1.21em;
      min-height: 56px;
      width: 100%;
      box-sizing: border-box;
      color: #7b1fa2;
      font-weight: 600;
      text-align: center;
      word-break: break-word;
      box-shadow: 0 1px 7px 0 #e1bee755, 0 0 0 #fff;
      letter-spacing: .01em;
      border: 1.5px dashed #e0a3c2;
      animation: popIn .8s cubic-bezier(.55,1.35,.55,1.15);
    }
    @keyframes popIn {
      from { opacity: 0; transform: scale(0.93);}
      to { opacity: 1; transform: scale(1);}
    }
    .footer {
      font-size: 1em;
      color: #a0a0a0;
      margin-top: 2em;
      margin-bottom: 1.2em;
      text-align: center;
      letter-spacing: .02em;
    }
    .notice {
      font-size: .97em;
      color: #7b1fa2;
      margin-bottom: 1em;
      text-align: center;
      padding: 0.7em 0.6em;
      background: linear-gradient(90deg,#f3e7f8 80%,#fff 100%);
      border-radius: 10px;
      display: block;
      box-shadow: 0 1px 4px #e1bee733;
      border: 1px solid #f3e7f8;
      opacity: 0.93;
    }
    .genre-icon {
      font-size: 1.15em;
      margin-right: 0.4em;
      vertical-align: middle;
      color: #e040fb;
    }
    .author-label {
      color: #e040fb;
      font-weight: 700;
      letter-spacing: .01em;
      font-size: 1.01em;
    }
    .suggested-song {
      color: #e91e63;
      font-size: 1.13em;
      font-weight: 800;
      letter-spacing: .02em;
      font-family: 'Poppins', 'Segoe UI', Arial, sans-serif;
    }
    @media (max-width: 500px) {
      .container { padding: 1em 0.2em 1.5em 0.2em; border-radius: 0; margin: 0.6em auto 0.5em auto;}
      h1 { font-size: 1.25em; }
      .wonder { font-size: 1.2em;}
      #result { font-size: 1em; padding: .8em .3em;}
      button { font-size: 1em; padding: .8em 1.7em;}
    }
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap');
  </style>
</head>
<body>
  <div class="container">
    <h1>
      <span class="wonder">ðŸŽµ</span>
      Song Suggester
    </h1>
    <div class="notice">
      Your shortcut to the perfect song â€“ daily and effortless.
    </div>

    <label for="genre"><span class="genre-icon"></span>Choose your genre(Sir):</label>
    <select id="genre" disabled>
      <option>Loading genres...</option>
    </select>
    <button id="suggestBtn" onclick="suggestSong()" disabled>ðŸŽ¶ Suggest Me a Song</button>
    <div id="result"></div>

    <!-- âœ… Copy to Clipboard button -->
    <button onclick="copyToClipboard()">ðŸ“‹ Copy to Clipboard</button>

    <div class="footer">
      Made with <span style="color:#e91e63;">&#10084;</span> for music lovers
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script>
    let allSongs = [];
    let genres = new Set();

    function fetchAndParseExcel() {
      fetch('tamil_songs_all_genres.xlsx')
        .then(response => {
          if (!response.ok) throw new Error('File not found');
          return response.arrayBuffer();
        })
        .then(data => {
          const workbook = XLSX.read(data, {type: 'array'});
          const sheetName = workbook.SheetNames[0];
          const sheet = workbook.Sheets[sheetName];
          const json = XLSX.utils.sheet_to_json(sheet, {defval: ""});
          allSongs = json.filter(row =>
            row['Song Name'] && row['Author'] && row['Genre']
          );
          if (allSongs.length === 0) {
            document.getElementById('genre').innerHTML = "<option>No valid data</option>";
            document.getElementById('genre').disabled = true;
            document.getElementById('suggestBtn').disabled = true;
            return;
          }
          genres = new Set();
          allSongs.forEach(song => genres.add(song['Genre']));
          populateGenres();
          document.getElementById('genre').disabled = false;
          document.getElementById('suggestBtn').disabled = false;
          document.getElementById('result').textContent = '';
        })
        .catch(err => {
          document.getElementById('genre').innerHTML = "<option>Could not load file</option>";
          document.getElementById('genre').disabled = true;
          document.getElementById('suggestBtn').disabled = true;
          document.getElementById('result').textContent = err.message;
        });
    }

    function populateGenres() {
      const genreSelect = document.getElementById('genre');
      genreSelect.innerHTML = "";
      Array.from(genres).sort().forEach(genre => {
        const opt = document.createElement('option');
        opt.value = genre;
        opt.textContent = genre;
        genreSelect.appendChild(opt);
      });
    }

    function suggestSong() {
      const genre = document.getElementById('genre').value;
      const filtered = allSongs.filter(song => song['Genre'] === genre);
      if (filtered.length === 0) {
        document.getElementById('result').textContent = "No songs found for this genre.";
        return;
      }
      const song = filtered[Math.floor(Math.random() * filtered.length)];
      let cleanSongName = song['Song Name'].replace(/\s*\d+$/, "");
      document.getElementById('result').innerHTML =
        `<div class="suggested-song">${cleanSongName}</div>
         <div class="author-label">by ${song['Author']}</div>`;
    }

function copyToClipboard() {
  const resultText = document.querySelector(".suggested-song");
  if (!resultText) {
    alert("Please get a song suggestion first!");
    return;
  }
  const songName = resultText.innerText.trim();
  navigator.clipboard.writeText(songName)
    .then(() => {
      alert("Copied!");
    })
    .catch(err => {
      alert("Copy failed. Try again.");
      console.error(err);
    });
}


    window.onload = fetchAndParseExcel;
  </script>
</body>
</html>
